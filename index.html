<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/style.css">

    <title>Decodificador</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter&display=swap" rel="stylesheet">
</head>
<body>
    <header>
        <img src="assets/img/Logo.png" alt="Logo da marca Alura">
    </header>

    <main class="entrada-saida-dados">
        <div class="container">
            <section class="entrada-dados">
                <div class="container">
                    <div class="entrada-dados-campo">
                        <textarea class="entrada-texto" cols="40" rows="10" id="texto" placeholder="Digite seu texto"></textarea>
                    </div>

                    <div class="entrada-dados-botoes">
                        <button class="botao-criptografar" onclick="criptografar()" type="submit">Criptografar</button>
                        <button class="botao-descriptografar" onclick="descriptografar()" type="submit">Descriptografar</button>
                    </div>
                </div>
            </section>
 
            <section class="saida-dados">
                <div class="saida-dados-informacao">
                    <img class="campo-imagem" src="assets/img/Resultado.png" alt="Menina com um lupa">
                    <div class="campo-texto">
                        <h1>Nenhuma mensagem encontrada</h1>
                        <p>Digite um texto que você deseja criptografar ou descriptografar.</p>
                    </div>
                </div>
                <div class="saida-dados-texto">
                    <textarea id="saida-dados-resultado" title="teste" cols="10" rows="20" readonly></textarea>
                </div>
                <div class="saida-dados-botao">
                    <button class="botao-copiar" onclick="copiarTexto()" type="submit">Copiar</button> 
                </div>
            </section>

            
        </div>
    </main>

    <footer>
        <div class="rodape">

            <img class="oracle-logo" src="assets/img/oracle-alura.png" alt="Oracle Next Education Logo">

            <div class="rodape-contato">   
                <p class="email">E-mail: <a href="mailto:vini.dantas61@gmail.com">vini.dantas61@gmail.com</a></p>
                <p class="linkedln">
                LinkedIn: <a href="https://www.linkedin.com/in/viniddantas">linkedin.com/in/viniddantas/</a>
                </p>
                <p class="github">GitHub: <a href="https://github.com/viniddantas">github.com/viniddantas</a></p> 
            </div>
        </div>
        <section>
            <div class="rodape-direitos">
                <p class="copyright"> Copyright &copy; 2023 - Vinícius Domingues Dantas</p>
            </div>
        </section>
    </footer>
</body>
</html>

<script>
    document.getElementById("saida-dados-resultado").style.display = "none"; //esconde a area do texto resultante
    function ocultarImagem() {
        document.querySelector("div.saida-dados-informacao").style.display = "none"; //esconde a imagem
        document.getElementById("saida-dados-resultado").style.display = ""; //exibe a area do texto resultante
        
    }
    function exibeImagem() {
        document.querySelector("div.saida-dados-informacao").style.display = ""; //exibe a imagem
        document.getElementById("saida-dados-resultado").style.display = "none"; //esconde a area do texto resultante
    }

    function recebeTexto () {
        texto = document.querySelector("textarea.entrada-texto").value; //Captura o texto escrito no campo de input do HTML
        return texto;
    }

    function criptografar() {
        texto = recebeTexto();
        if(texto.length != 0) {
            ocultarImagem();
        } else {
            exibeImagem();
        }
        
        var textoCriptografado= "";
        for (var i = 0; i < texto.length; i++) {
            if (texto[i] == 'a') {
                textoCriptografado += "ai";
            } else if (texto[i] == 'e') {
                textoCriptografado +="enter";
            } else if (texto[i] == 'i') {
                textoCriptografado += "imes";
            } else if (texto[i] == 'o') {
                textoCriptografado += "ober";
            } else if (texto[i] == 'u') {
                textoCriptografado += "ufat";
            } else {
                textoCriptografado += texto[i];
            }
        }
        document.getElementById("saida-dados-resultado").innerText = textoCriptografado; //exibe o resultado
    }

    function descriptografar() {
        texto = recebeTexto();
        if(texto.length != 0) {
            ocultarImagem();
        } else {
            exibeImagem();
        }
        
        var textoDescriptografado = texto;
        for (var i = 0; i < texto.length; i++) {
            if (texto.includes("ai") == true) {
                textoDescriptografado = textoDescriptografado.replace("ai", "a");
            } 
            if (texto.includes("enter") == true) {
                textoDescriptografado = textoDescriptografado.replace("enter", "e");
            } 
            if (texto.includes("imes") == true) {
                textoDescriptografado = textoDescriptografado.replace("imes", "i");
            } 
            if (texto.includes("ober") == true) {
                textoDescriptografado = textoDescriptografado.replace("ober", "o");
            } 
            if (texto.includes("ufat") == true) {
                textoDescriptografado = textoDescriptografado.replace("ufat", "u");
            } 
        }
        document.getElementById("saida-dados-resultado").innerText = textoDescriptografado; //exibe o resultado
    }

    function copiarTexto() {
        let textoCopiado = document.querySelector("#saida-dados-resultado");
        textoCopiado.select();
        document.execCommand("copy");
    }
</script>
